# 实现后端服务启动脚本

## 1. 需求分析
- 在app.py中添加uvicorn启动脚本
- 将后端服务启动到本地的8003端口
- 支持后续使用内网穿透工具将API映射到公网

## 2. 实现方案
1. **创建FastAPI应用**：在app.py中初始化一个FastAPI应用
2. **添加基本路由**：
   - 健康检查路由 `/`
   - 简单的API路由示例
3. **配置uvicorn启动**：
   - 绑定到0.0.0.0:8003
   - 使用HTTP协议（不使用SSL，因为后续将通过内网穿透工具处理）
   - 添加启动脚本，支持直接运行app.py

## 3. 代码实现
```python
from fastapi import FastAPI
import uvicorn
import os

# 创建FastAPI应用
app = FastAPI(
    title="后端服务",
    description="用于前端对接的后端API服务",
    version="1.0.0"
)

# 健康检查路由
@app.get("/")
def read_root():
    return {
        "message": "后端服务运行正常",
        "version": "1.0.0"
    }

# 示例API路由
@app.get("/api/v1/health")
def health_check():
    return {
        "status": "healthy",
        "service": "backend-api"
    }

if __name__ == "__main__":
    # 启动uvicorn服务器
    uvicorn.run(
        "app:app",
        host="0.0.0.0",
        port=8003,
        reload=True  # 开发模式下启用热重载
    )
```

## 4. 启动方式
- 直接运行：`python app.py`
- 或使用uvicorn命令：`uvicorn app:app --host 0.0.0.0 --port 8003 --reload`

## 5. 验证方法
- 访问 `http://localhost:8003/` 查看健康检查
- 访问 `http://localhost:8003/api/v1/health` 查看API状态

## 6. 后续扩展
- 可以根据需要添加更多API路由
- 可以集成现有的agent功能
- 可以添加中间件、认证等功能